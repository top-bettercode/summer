<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="top.bettercode.simpleframework.data.test.repository.UserRepository">

  <resultMap id="userResultMap" type="top.bettercode.simpleframework.data.test.resp.CUser">
    <result property="firstName" column="first_name"/>
    <collection property="lastName" javaType="java.util.List"
      ofType="java.lang.String">
      <result column="last_name"/>
    </collection>
  </resultMap>

  <resultMap id="userResultMap1" type="top.bettercode.simpleframework.data.test.resp.CUsers">
    <result property="firstName" column="first_name"/>
    <collection property="lastName" javaType="java.util.List"
      ofType="top.bettercode.simpleframework.data.test.resp.LastName">
      <result property="lastName" column="last_name"/>
    </collection>
  </resultMap>

  <select id="findByMybatis22" resultMap="userResultMap"
    parameterType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where first_name = #{firstName}
    <if test="lastName!=null">
      and last_name = #{lastName}
    </if>
  </select>

  <select id="findByMybatis22s" resultMap="userResultMap1"
    parameterType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where first_name = #{firstName}
    <if test="lastName!=null">
      and last_name = #{lastName}
    </if>
  </select>

  <insert id="insert">
    insert into user (first_name, last_name,id) values (#{firstName},#{lastName},100)
  </insert>
  <update id="update">
    update user
    set last_name=#{lastName}
    where id = #{id}
  </update>
  <delete id="deleteBy">
    delete
    from user
    where id = #{id}
  </delete>


  <select id="findByMybatis" resultType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where deleted = 0
  </select>
  <select id="findByMybatis257" resultType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where first_name = #{firstName} AND first_name = #{firstName}
    <if test="lastName!=null or param2!=null">
      and last_name = #{param2}
    </if>
  </select>
  <select id="findByMybatis2" resultType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where first_name = #{firstName}
    <if test="lastName!=null">
      and last_name = #{lastName}
    </if>
  </select>
  <select id="findByMybatis3" resultType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where first_name = #{firstName}
  </select>
  <select id="findOneByMybatis"
    resultType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where deleted = 0
      and first_name = #{a}
  </select>
  <select id="findByMybatis222"
    resultType="top.bettercode.simpleframework.data.test.domain.User">
    select *
    from user
    where first_name = #{firstName}
    <if test="lastName!=null">
      and last_name = #{lastName}
    </if>
  </select>
</mapper>
